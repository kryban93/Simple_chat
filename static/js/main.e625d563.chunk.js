(this.webpackJsonpmychat=this.webpackJsonpmychat||[]).push([[0],{11:function(e,t,n){e.exports={container:"Profile_container__3dV8x",btn:"Profile_btn__3dZxZ","btn-profile":"Profile_btn-profile__2pn6d","btn-logout":"Profile_btn-logout__1SjcL","btn-sidebar":"Profile_btn-sidebar__YDCrW","btn-panel":"Profile_btn-panel__3HkyN",input:"Profile_input__1GlJn",popup:"Profile_popup__1UQql",icon:"Profile_icon__3AC3U",sidebar:"Profile_sidebar__YIQBP",title:"Profile_title__3xHDY"}},14:function(e,t,n){e.exports={wrapper:"SignUpView_wrapper__f5pQB",container:"SignUpView_container__17t-Y",title:"SignUpView_title__3Ybjr",form:"SignUpView_form__2HC8q",input:"SignUpView_input__2avHl",btn:"SignUpView_btn__2Np3e","btn-signup":"SignUpView_btn-signup__RkDnB","btn-back":"SignUpView_btn-back__1JEbR","btn-login":"SignUpView_btn-login__6byYr",subtext:"SignUpView_subtext__12u87",error:"SignUpView_error__3BMYC"}},16:function(e,t,n){e.exports={wrapper:"LoginView_wrapper__3G6on",container:"LoginView_container__f7IO9",title:"LoginView_title__2aQJ8",form:"LoginView_form__u06r1",input:"LoginView_input__1enJ0",btn:"LoginView_btn__1Q1JX","btn-signup":"LoginView_btn-signup__2mjBQ","btn-back":"LoginView_btn-back__1wfKP","btn-login":"LoginView_btn-login__cvZW9",subtext:"LoginView_subtext__--De2",error:"LoginView_error__39cY5"}},17:function(e,t,n){e.exports={wrapper:"ForgotPasswordView_wrapper__3LwyM",container:"ForgotPasswordView_container__3IPMp",title:"ForgotPasswordView_title__ys8Ak",form:"ForgotPasswordView_form__2BckW",input:"ForgotPasswordView_input__taVOS",btn:"ForgotPasswordView_btn__2zTZK","btn-signup":"ForgotPasswordView_btn-signup__3guRV","btn-back":"ForgotPasswordView_btn-back__2EeCu","btn-forgot":"ForgotPasswordView_btn-forgot__1mLFh","btn-login":"ForgotPasswordView_btn-login__39Boo",subtext:"ForgotPasswordView_subtext__2hWV4",error:"ForgotPasswordView_error__3at4N"}},22:function(e,t,n){e.exports={nav:"LandingView_nav__1-KIo",nav_logo:"LandingView_nav_logo__3--wn",nav_btn:"LandingView_nav_btn__QM740","nav_btn-login":"LandingView_nav_btn-login__372s2","nav_btn-signup":"LandingView_nav_btn-signup__27reZ",about:"LandingView_about__2kEIp",about_img:"LandingView_about_img__20x9B",about_content:"LandingView_about_content__1ldl8",btn:"LandingView_btn__1bfKH","btn-signup":"LandingView_btn-signup__BGsZ-"}},23:function(e,t,n){e.exports={wrapper:"Loader_wrapper__9mHgY",circle:"Loader_circle__39z03",slide:"Loader_slide__1-Jx2"}},26:function(e,t,n){e.exports={wrapper:"Chat_wrapper__Xq_0q",container:"Chat_container__dN9bM","container-loggeduser":"Chat_container-loggeduser__3hLoa",user:"Chat_user__DnCyR"}},27:function(e,t,n){e.exports={container:"MessageBox_container__2SFeR","container-loggeduser":"MessageBox_container-loggeduser__3Nd0K",text:"MessageBox_text__3mfRG",time:"MessageBox_time__3O2eG"}},30:function(e,t,n){e.exports={wrapper:"MainView_wrapper__3IlIA",container:"MainView_container__Z-17l",btn:"MainView_btn__Rhhqi"}},31:function(e,t,n){e.exports={container:"InputBox_container__qVgse",input:"InputBox_input__duOcu",btn:"InputBox_btn__2K1G6"}},32:function(e,t,n){e.exports={container:"Error_container__1oYSu"}},39:function(e,t,n){e.exports={nav:"Nav_nav__27J3K",logo:"Nav_logo__1kLph"}},49:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(2),r=n.n(c),s=n(41),o=n.n(s),i=(n(49),n(12)),l=n(8),u=n(3),b=n(36),j=(n(50),n(59),b.a.initializeApp({apiKey:"AIzaSyCQ6bmSWjWOCXo4rxVhHsrjRHB1MO4rGSE",authDomain:"mychat-6bfaf.firebaseapp.com",databaseURL:"https://mychat-6bfaf-default-rtdb.firebaseio.com/",projectId:"mychat-6bfaf",storageBucket:"mychat-6bfaf.appspot.com",messagingSenderId:"794831916429",appId:"1:794831916429:web:b7f8af6c2b1d0a755941c4"})),d=j.auth(),p=b.a.firestore(),m=r.a.createContext();function _(){return Object(c.useContext)(m)}var h=function(e){var t=e.children,n=Object(c.useState)(),r=Object(u.a)(n,2),s=r[0],o=r[1],i=Object(c.useState)(!0),l=Object(u.a)(i,2),b=l[0],j=l[1];Object(c.useEffect)((function(){return d.onAuthStateChanged((function(e){o(e),j(!1)}))}),[]);var p={authUser:s,signUp:function(e,t){return d.createUserWithEmailAndPassword(e,t)},login:function(e,t){return d.signInWithEmailAndPassword(e,t)},logout:function(){return d.signOut()},resetPassword:function(e){return d.sendPasswordResetEmail(e)},setAuthUser:o};return Object(a.jsx)(m.Provider,{value:p,children:!b&&t})},O=n(5),f=n.n(O),x=n(9);var g=r.a.createContext();function v(){return Object(c.useContext)(g)}function w(e){var t=e.children,n=Object(c.useState)([]),r=Object(u.a)(n,2),s=r[0],o=r[1],i=Object(c.useState)(),l=Object(u.a)(i,2),b=l[0],j=l[1],d=Object(c.useState)(),m=Object(u.a)(d,2),_=m[0],h=m[1],O=Object(c.useState)([]),v=Object(u.a)(O,2),w=v[0],N=v[1],S=Object(c.useState)(""),k=Object(u.a)(S,2),y=k[0],V=k[1],C=p.collection("rooms"),U=p.collection("users");function F(){return(F=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.doc(t).collection("messages").onSnapshot(function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t.forEach((function(e){n.push(e.data())})),a=n.sort((function(e,t){return new Date(e.timestamp)-new Date(t.timestamp)})),N(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){V("Cannot read the data, error: ",e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){return function(){N([]),h(""),j({})}}),[]);var P={roomsArray:s,createRoom:function(e,t){var n,a=[];a.push(b),n=Math.random().toString(36).substr(2,14),C.doc("".concat(n)).set({roomId:n,users:a,creator:b,name:e,password:t}).then((function(e){console.log("Room created with ID",e.id)})).catch((function(e){V("Error adding document: ",e)})),U.doc(b.uid).collection("rooms").add({name:e,roomId:n}).then((function(){console.log("Created room in user")})).catch((function(e){V("error creating rooms array: ",e)}))},currentUser:b,createUserInFirestore:function(e){var t={email:e.user.email,uid:e.user.uid,photoUrl:"www.stockphoto.com"};j(t),U.doc("".concat(e.user.uid)).set({email:t.email,uid:t.uid,photoUrl:t.photoUrl}).then((function(){console.log("User succesfully created")})).catch((function(e){V("error while creating User: ",e)}))},authUserWithFirebase:function(e){var t;U.where("uid","==",e.uid).get().then((function(e){return e.forEach((function(e){t=e.data(),j(t),console.log("Authorized with firebase!")}))})).catch((function(e){V("error getting users list: ",e)}))},readRoomsList:function(e){U.doc(e.uid).collection("rooms").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),o(t)}),(function(e){V("Cannot read the data, error: ",e)}))},joinRoom:function(e,t){var n=C.doc(e);n.get().then((function(a){if(a.exists){var c=a.data();if(c.password!==t)V("Wrong password");else{console.log("correct!");var r=c.users,s=c.name;r.push(b),n.update({users:r}),U.doc(b.uid).collection("rooms").add({name:s,roomId:e})}}else V("No such room!")}))},selectRoom:function(e){h(e)},currentRoom:_,sendMessage:function(e,t){C.doc(e).collection("messages").add({text:t,user:b,timestamp:Date.now()}).catch((function(e){V("error adding message: ",e)}))},messagesArray:w,getAllMessages:function(e){return F.apply(this,arguments)},setUserName:function(e){U.doc(b.uid).set({name:e},{merge:!0}).then((function(){console.log("Succesfully set user name")})).catch((function(e){V("Error while setting user name: ",e)}))},error:y};return Object(a.jsx)(g.Provider,{value:P,children:t})}var N=n.p+"static/media/logo.03a737ee.svg",S=n(22),k=n.n(S),y=n.p+"static/media/undraw_guys_typing.d4e24b53.svg",V=function(){return Object(a.jsxs)("div",{className:k.a.wrapper,children:[Object(a.jsxs)("nav",{className:k.a.nav,children:[Object(a.jsx)("img",{src:N,alt:"logo",className:k.a.nav_logo}),Object(a.jsx)(i.b,{to:"/login",children:Object(a.jsx)("button",{className:"".concat(k.a.nav_btn," ").concat(k.a["nav_btn-login"]),children:"login"})}),Object(a.jsx)(i.b,{to:"/signup",children:Object(a.jsx)("button",{className:"".concat(k.a.nav_btn," ").concat(k.a["nav_btn-signup"]),children:"sign up"})})]}),Object(a.jsxs)("section",{className:k.a.about,id:"about",children:[Object(a.jsx)("img",{src:y,alt:"friends writting on chat",className:k.a.about_img}),Object(a.jsx)("div",{className:k.a.about_content,children:Object(a.jsxs)("h2",{children:[Object(a.jsx)("strong",{children:" Plathewi "}),"makes it easy and fun to stay close to everyone You need to. Create and join rooms that focus on your hobbies and itrests."," ",Object(a.jsx)(i.b,{to:"/signup",style:{color:"blue"},children:"Join now"})," ","for free."]})})]})]})},C=n(16),U=n.n(C),F=n(23),P=n.n(F);var L=function(){return Object(a.jsx)("div",{className:P.a.wrapper,children:Object(a.jsxs)("div",{className:P.a.container,children:[Object(a.jsx)("div",{className:P.a.circle}),Object(a.jsx)("div",{className:P.a.circle}),Object(a.jsx)("div",{className:P.a.circle}),Object(a.jsx)("div",{className:P.a.circle}),Object(a.jsx)("div",{className:P.a.circle})]})})};var I=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),o=Object(u.a)(s,2),b=o[0],j=o[1],d=Object(c.useState)(!1),p=Object(u.a)(d,2),m=p[0],h=p[1],O=_().login,g=v(),w=g.authUserWithFirebase,N=g.readRoomsList,S=Object(c.useState)(""),k=Object(u.a)(S,2),y=k[0],V=k[1],C=Object(l.g)(),F=function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,V(""),h(!0),e.next=6,O(n,b).then(function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t.user);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){console.log("".concat(e.code,": ").concat(e.message))}));case 6:C.push("/main"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),V("Failed to log in"),h(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:U.a.wrapper,children:[m&&Object(a.jsx)(L,{}),Object(a.jsxs)("div",{className:U.a.container,children:[Object(a.jsx)("h2",{className:U.a.title,children:"Login to start chat"}),Object(a.jsxs)("form",{onSubmit:F,className:U.a.form,children:[y&&Object(a.jsx)("p",{className:"",children:y}),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{className:U.a.input,type:"email",onChange:function(e){return r(e.target.value)},value:n,required:!0,id:"email"}),Object(a.jsx)("label",{className:U.a.label,htmlFor:"email",children:"email"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{className:U.a.input,type:"password",onChange:function(e){return j(e.target.value)},value:b,required:!0,id:"password"}),Object(a.jsx)("label",{className:U.a.label,htmlFor:"password",children:"password"})]}),Object(a.jsx)("button",{disabled:m,type:"submit",className:"".concat(U.a.btn," ").concat(U.a["btn-login"]),children:"login"}),Object(a.jsx)("div",{children:Object(a.jsx)(i.b,{to:"/forgot",children:"Forgot password?"})})]})]}),Object(a.jsxs)("div",{className:U.a.subtext,children:[Object(a.jsx)("p",{children:"Need an account? "}),Object(a.jsx)(i.b,{to:"/signup",children:Object(a.jsx)("button",{className:"".concat(U.a.btn," ").concat(U.a["btn-signup"]),children:"sign Up"})})]}),Object(a.jsx)(i.b,{to:"/",children:Object(a.jsx)("button",{className:"".concat(U.a.btn," ").concat(U.a["btn-back"]),children:"back to landing page"})})]})},R=n(14),E=n.n(R);var B=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),o=Object(u.a)(s,2),b=o[0],j=o[1],d=Object(c.useState)(""),p=Object(u.a)(d,2),m=p[0],h=p[1],O=Object(c.useState)(""),g=Object(u.a)(O,2),w=g[0],N=g[1],S=Object(c.useState)(!1),k=Object(u.a)(S,2),y=k[0],V=k[1],C=_().signUp,U=v().createUserInFirestore,F=Object(l.g)();function P(){return(P=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b===m){e.next=3;break}return e.abrupt("return",N("Passwords do not match"));case 3:return e.prev=3,N(""),V(!0),e.next=8,C(n,b).then(function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.user.uid),e.next=3,U(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("".concat(e.code,": ").concat(e.message))}));case 8:F.push("/main"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),N("Failed to create an account");case 14:V(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}return Object(a.jsxs)("div",{className:E.a.wrapper,children:[y&&Object(a.jsx)(L,{}),Object(a.jsxs)("div",{className:E.a.container,children:[Object(a.jsx)("h2",{className:E.a.title,children:"Sign Up"}),w&&Object(a.jsx)("p",{className:E.a.error,children:w}),Object(a.jsxs)("form",{className:E.a.form,onSubmit:function(e){return P.apply(this,arguments)},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"email",className:E.a.input,onChange:function(e){return r(e.target.value)},value:n,placeholder:"",required:!0,id:"email"}),Object(a.jsx)("label",{className:E.a.label,htmlFor:"email",children:"email"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"password",className:E.a.input,onChange:function(e){return j(e.target.value)},value:b,placeholder:"",id:"password",required:!0}),Object(a.jsx)("label",{className:E.a.label,htmlFor:"password",children:"password"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"password",className:E.a.input,onChange:function(e){return h(e.target.value)},value:m,placeholder:"",id:"passwordconfirm",required:!0}),Object(a.jsx)("label",{className:E.a.label,htmlFor:"passwordconfirm",children:"password confirmation"})]}),Object(a.jsx)("button",{disabled:y,className:"".concat(E.a.btn," ").concat(E.a["btn-signup"]),children:"sign up"})]})]}),Object(a.jsxs)("div",{className:E.a.subtext,children:[Object(a.jsx)("p",{className:"",children:"Already have an account?"}),Object(a.jsx)(i.b,{to:"/login",children:Object(a.jsx)("button",{className:"".concat(E.a.btn," ").concat(E.a["btn-login"]),children:"log In"})})]}),Object(a.jsx)(i.b,{to:"/",children:Object(a.jsx)("button",{className:"".concat(E.a.btn," ").concat(E.a["btn-back"]),children:"back to landing page"})})]})},M=n(33),A=n(43),D=function(e){var t=e.component,n=Object(A.a)(e,["component"]),c=_().authUser;return Object(a.jsx)(l.b,Object(M.a)(Object(M.a)({},n),{},{render:function(e){return c?Object(a.jsx)(t,Object(M.a)({},e)):Object(a.jsx)(l.a,{to:"/login"})}}))},q=n(39),W=n.n(q),Y=n(11),H=n.n(Y),J=n.p+"static/media/create_black.93b752a2.svg",K=n.p+"static/media/join_black.3f759704.svg",G=n.p+"static/media/send_white.fbfb5051.svg",Q=n.p+"static/media/menu_black.86036906.svg",z=n.p+"static/media/profile_black.3819887d.svg",Z=n.p+"static/media/close_white.0bb5d73b.svg",T=n.p+"static/media/close_black.78a29af7.svg",X={create_black:J,join_black:K,send_white:G,menu_black:Q,profile_black:z,close_white:Z,close_black:T};var $=function(){var e=_().logout,t=v(),n=t.currentUser,r=t.setUserName,s=Object(l.g)(),o=Object(c.useState)(!1),i=Object(u.a)(o,2),b=i[0],j=i[1],d=Object(c.useState)(""),p=Object(u.a)(d,2),m=p[0],h=p[1],O=Object(c.useState)(!1),g=Object(u.a)(O,2),w=g[0],N=g[1],S=Object(c.useState)(""),k=Object(u.a)(S,2),y=k[0],V=k[1];function C(){return(C=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(y);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){console.log(n)}),[]),Object(a.jsxs)("div",{className:H.a.container,children:[Object(a.jsx)("button",{className:"".concat(H.a.btn," ").concat(H.a["btn-profile"]),onClick:function(){j(!b)},children:Object(a.jsx)("img",{src:X.profile_black,alt:"profile button icon",className:H.a.icon})}),b?Object(a.jsxs)("div",{className:H.a.sidebar,children:["name"in n?Object(a.jsx)("h3",{className:H.a.title,children:n.name}):Object(a.jsx)("h3",{className:H.a.title,children:n.email}),Object(a.jsx)("button",{onClick:function(){return N(!w)},className:"".concat(H.a.btn," ").concat(H.a["btn-sidebar"]),children:"Set nickname"}),w?Object(a.jsxs)("div",{className:H.a.popup,children:[Object(a.jsx)("input",{onChange:function(e){return V(e.target.value)},value:y,className:H.a.input,placeholder:"name"}),Object(a.jsx)("button",{onClick:function(){return C.apply(this,arguments)},className:"".concat(H.a.btn," ").concat(H.a["btn-panel"]),children:"set name"})]}):null,Object(a.jsx)("button",{className:"".concat(H.a.btn," ").concat(H.a["btn-sidebar"]),children:"Set profile photo"}),Object(a.jsx)("button",{className:"".concat(H.a.btn," ").concat(H.a["btn-sidebar"]),children:"Update password"}),Object(a.jsx)("button",{className:"".concat(H.a.btn," ").concat(H.a["btn-logout"]),onClick:function(){return function(){try{e(),s.push("/login")}catch(t){h("Failed to logout")}}()},children:"logout"}),m?Object(a.jsx)("p",{children:m}):null]}):null]})};var ee=function(){return Object(a.jsxs)("nav",{className:W.a.nav,children:[Object(a.jsx)("img",{src:N,alt:"logo icon",className:W.a.logo}),Object(a.jsx)($,{})]})},te=n(30),ne=n.n(te),ae=n(6),ce=n.n(ae);var re=function(e){var t=e.handleSelectRoom,n=v(),r=n.roomsArray,s=n.createRoom,o=n.joinRoom,i=n.currentRoom,l=Object(c.useState)(""),b=Object(u.a)(l,2),j=b[0],d=b[1],p=Object(c.useState)(""),m=Object(u.a)(p,2),_=m[0],h=m[1],O=Object(c.useState)(!1),f=Object(u.a)(O,2),x=f[0],g=f[1],w=Object(c.useState)(""),N=Object(u.a)(w,2),S=N[0],k=N[1],y=Object(c.useState)(""),V=Object(u.a)(y,2),C=V[0],U=V[1],F=Object(c.useState)(!1),P=Object(u.a)(F,2),L=P[0],I=P[1],R=Object(c.useState)(),E=Object(u.a)(R,2),B=E[0],M=E[1];return Object(a.jsxs)("div",{className:ce.a.container,children:[Object(a.jsx)("div",{className:ce.a.rooms,children:r.map((function(e){return Object(a.jsxs)("div",{className:i===e.roomId?"".concat(ce.a.rooms_item," ").concat(ce.a["rooms_item-active"]):ce.a.rooms_item,onClick:function(){return t(e.roomId)},children:[Object(a.jsx)("p",{className:ce.a.rooms_item_title,children:e.name}),Object(a.jsx)("p",{className:ce.a.rooms_item_subtext,children:e.roomId})]},e.roomId)}))}),Object(a.jsxs)("div",{className:ce.a.panel,children:[x?Object(a.jsxs)("div",{className:ce.a.popup,children:[Object(a.jsx)("button",{onClick:function(){return g(!x)},className:"".concat(ce.a.btn," ").concat(ce.a["btn-close"]),children:Object(a.jsx)("img",{src:X.close_white,alt:"close create room panel"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",className:ce.a.input,onChange:function(e){return d(e.target.value)},value:j,required:!0,id:"name"}),Object(a.jsx)("label",{className:ce.a.label,htmlFor:"name",children:"name"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"password",className:ce.a.input,onChange:function(e){return h(e.target.value)},value:_,required:!0,id:"password"}),Object(a.jsx)("label",{className:ce.a.label,htmlFor:"password",children:"password"})]}),B?Object(a.jsx)("p",{className:ce.a.error,children:B}):null,Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),_.length<=3?M("Password need at least 4 letters"):(s(j,_),g(!1),M())},className:"".concat(ce.a.btn," ").concat(ce.a["btn-action"]),children:"create"})]}):null,L?Object(a.jsxs)("div",{className:ce.a.popup,children:[Object(a.jsx)("button",{onClick:function(){return I(!L)},className:"".concat(ce.a.btn," ").concat(ce.a["btn-close"]),children:Object(a.jsx)("img",{src:X.close_white,alt:"close join room panel"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",className:ce.a.input,onChange:function(e){return k(e.target.value)},value:S,required:!0,id:"roomId"}),Object(a.jsx)("label",{className:ce.a.label,htmlFor:"roomId",children:"room id"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"password",className:ce.a.input,onChange:function(e){return U(e.target.value)},value:C,required:!0,id:"password"}),Object(a.jsx)("label",{className:ce.a.label,htmlFor:"password",children:"password"})]}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),o(S,C),I(!1)},className:"".concat(ce.a.btn," ").concat(ce.a["btn-action"]),children:"join"})]}):null,Object(a.jsxs)("button",{className:ce.a.panel_btn,onClick:function(){g(!x),I(!1)},children:[Object(a.jsx)("img",{src:X.create_black,className:ce.a.panel_icon,alt:"create room panel button"}),"create"]}),Object(a.jsxs)("button",{className:ce.a.panel_btn,onClick:function(){I(!L),g(!1)},children:[Object(a.jsx)("img",{src:X.join_black,className:ce.a.panel_icon,alt:"join room panel button"}),"join"]})]})]})},se=n(26),oe=n.n(se),ie=n(27),le=n.n(ie);var ue=function(e){var t=e.text,n=(e.userId,e.photoUrl,e.timestamp),c=e.isCurrentUser,r=(v().currentUser,new Date(n).getHours()),s=new Date(n).getMinutes();return Object(a.jsxs)("div",{className:c?"".concat(le.a.container," ").concat(le.a["container-loggeduser"]):"".concat(le.a.container),children:[Object(a.jsx)("p",{className:le.a.text,children:t}),Object(a.jsxs)("p",{className:le.a.time,children:[r,":",s<10?"0".concat(s):s]})]})};function be(){var e=v(),t=e.messagesArray,n=e.getAllMessages,r=e.currentRoom,s=e.currentUser,o=Object(c.useState)(!0),i=Object(u.a)(o,2),l=i[0],b=i[1];Object(c.useRef)(null);function j(e,t){var n=e.indexOf(t);return void 0===e[n-1]||e[n-1].user.uid!==t.user.uid}return Object(c.useEffect)((function(){function e(){return(e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(r);case 2:b(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){b(!0)}}),[r]),Object(a.jsxs)(a.Fragment,{children:[l&&Object(a.jsx)(L,{}),Object(a.jsx)("div",{className:oe.a.wrapper,children:t?t.map((function(e){return Object(a.jsxs)("div",{className:e.user.uid===s.uid?"".concat(oe.a.container," ").concat(oe.a["container-loggeduser"]):oe.a.container,children:[j(t,e)?void 0===e.user.name?Object(a.jsx)("p",{className:oe.a.user,children:e.user.email}):Object(a.jsx)("p",{className:oe.a.user,children:e.user.name}):null,Object(a.jsx)(ue,{text:e.text,userId:e.user.uid,timestamp:e.timestamp,isCurrentUser:e.user.uid===s.uid},"".concat(t.indexOf(e)))]})})):null})]})}var je=be;be.defaultValues={currentRoom:""};var de=n(31),pe=n.n(de);var me=function(){var e=v(),t=e.currentRoom,n=e.sendMessage,r=Object(c.useState)(""),s=Object(u.a)(r,2),o=s[0],i=s[1];function l(){return(l=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,o);case 2:i("");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(x.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==a.key){e.next=6;break}return e.next=3,n(t,o);case 3:i(""),e.next=7;break;case 6:return e.abrupt("return");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)("div",{className:pe.a.container,children:[Object(a.jsx)("input",{type:"text",className:pe.a.input,onChange:function(e){return i(e.target.value)},value:o,placeholder:"Write message...",onKeyPress:function(e){return b.apply(this,arguments)}}),Object(a.jsxs)("button",{className:pe.a.btn,onClick:function(){return function(){return l.apply(this,arguments)}()},children:[Object(a.jsx)("p",{children:"send"}),Object(a.jsx)("img",{src:X.send_white,alt:"send icon"})]})]})};var _e=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}};var he=function(){var e=v(),t=e.authUserWithFirebase,n=e.selectRoom,r=e.readRoomsList,s=Object(c.useState)(!0),o=Object(u.a)(s,2),i=o[0],l=o[1],b=Object(c.useState)(!1),j=Object(u.a)(b,2),d=j[0],p=j[1],m=_().authUser,h=function(){var e=Object(c.useState)(_e()),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){window.addEventListener("resize",(function(){a(_e())}))}),[]),n}().width;return Object(c.useEffect)((function(){var e=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(m);case 2:r(m);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();h>768?(l(!0),p(!1)):(p(!0),l(!1)),e()}),[m,h]),Object(a.jsxs)("main",{className:ne.a.wrapper,children:[d?Object(a.jsx)("button",{className:ne.a.btn,onClick:function(){l(!i)},children:Object(a.jsx)("img",{src:i?T:Q,alt:"handle sidebar open button"})}):null,Object(a.jsx)(ee,{}),i?Object(a.jsx)(re,{handleSelectRoom:function(e){n(e),h<=768&&(l(!1),p(!0))}}):null,Object(a.jsxs)("div",{className:ne.a.container,children:[Object(a.jsx)(je,{}),Object(a.jsx)(me,{})]})]})},Oe=n(17),fe=n.n(Oe);var xe=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(!1),o=Object(u.a)(s,2),l=o[0],b=o[1],j=_().resetPassword,d=Object(c.useState)(""),p=Object(u.a)(d,2),m=p[0],h=p[1],O=function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,h(""),b(!0),e.next=6,j(n);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),h("Failed to log in"),b(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:fe.a.wrapper,children:[Object(a.jsxs)("div",{className:fe.a.container,children:[Object(a.jsx)("h2",{className:fe.a.title,children:"Write your email to send reset link"}),Object(a.jsxs)("form",{onSubmit:O,className:fe.a.form,children:[m&&Object(a.jsx)("p",{className:"",children:m}),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{className:fe.a.input,type:"email",onChange:function(e){return r(e.target.value)},value:n,required:!0,id:"email"}),Object(a.jsx)("label",{className:fe.a.label,htmlFor:"email",children:"email"})]}),Object(a.jsx)("button",{disabled:l,type:"submit",className:"".concat(fe.a.btn," ").concat(fe.a["btn-forgot"]),children:"send reset email"})]})]}),Object(a.jsxs)("div",{className:fe.a.subtext,children:[Object(a.jsx)("p",{children:"Need an account? "}),Object(a.jsx)(i.b,{to:"/signup",children:Object(a.jsx)("button",{className:"".concat(fe.a.btn," ").concat(fe.a["btn-signup"]),children:"sign Up"})}),Object(a.jsx)("p",{children:"Or just log in"}),Object(a.jsx)("div",{children:Object(a.jsx)(i.b,{to:"/login",children:Object(a.jsx)("button",{className:"".concat(fe.a.btn," ").concat(fe.a["btn-login"]),children:"login"})})})]}),Object(a.jsx)(i.b,{to:"/",children:Object(a.jsx)("button",{className:"".concat(fe.a.btn," ").concat(fe.a["btn-back"]),children:"back to landing page"})})]})},ge=n(32),ve=n.n(ge);var we=function(){var e=v().error,t=Object(c.useState)(!1),n=Object(u.a)(t,2),r=n[0],s=n[1];return Object(c.useEffect)((function(){s(""!==e),setTimeout((function(){s(!1)}),3e3)}),[e]),Object(a.jsx)("div",{className:ve.a.wrapper,children:r&&Object(a.jsx)("div",{className:ve.a.container,children:Object(a.jsx)("p",{className:ve.a.text,children:e})})})};var Ne=function(){return Object(a.jsx)(h,{children:Object(a.jsxs)(w,{children:[Object(a.jsx)(i.a,{children:Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{exact:!0,path:"/",component:V}),Object(a.jsx)(l.b,{path:"/login",component:I}),Object(a.jsx)(l.b,{path:"/signUp",component:B}),Object(a.jsx)(l.b,{path:"/forgot",component:xe}),Object(a.jsx)(D,{path:"/main",component:he})]})}),Object(a.jsx)(we,{})]})})},Se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Ne,{})}),document.getElementById("root")),Se()},6:function(e,t,n){e.exports={container:"Sidebar_container__nxtCR",error:"Sidebar_error__zi0iD",rooms:"Sidebar_rooms__2mgyx",rooms_item:"Sidebar_rooms_item__1IALI","rooms_item-active":"Sidebar_rooms_item-active__F3gOu",rooms_item_title:"Sidebar_rooms_item_title__nuq3G",rooms_item_subtext:"Sidebar_rooms_item_subtext__3YiI0",panel:"Sidebar_panel__3vHbB",panel_btn:"Sidebar_panel_btn__1i5Uh",panel_icon:"Sidebar_panel_icon__2vJVK",popup:"Sidebar_popup__2FRR9",input:"Sidebar_input__uTw_9",label:"Sidebar_label__KjNSP",btn:"Sidebar_btn__3VvCi","btn-close":"Sidebar_btn-close__1AVoV","btn-action":"Sidebar_btn-action__1YgiL"}}},[[58,1,2]]]);
//# sourceMappingURL=main.e625d563.chunk.js.map